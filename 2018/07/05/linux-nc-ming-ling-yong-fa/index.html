<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><script></script><meta name="theme-color" content="#222"><style>.pace .pace-progress{background:#1e92fb;height:3px}.pace .pace-progress-inner{box-shadow:0 0 10px #1e92fb,0 0 5px #1e92fb}.pace .pace-activity{border-top-color:#1e92fb;border-left-color:#1e92fb}</style><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="HGM141IpbHrSmnAmR6W_zE4bo9Z3f-yXLeHYT3bg1fk"><meta name="baidu-site-verification" content="code-5Ai1DA8e6T"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="Linux,nc,"><link rel="alternate" href="/atom.xml" title="凡间的精灵" type="application/atom+xml"><meta name="description" content="1、简介netcat(nc)是网络工具中的瑞士军刀，它能通过TCP和UDP在网络中读写数据。通过与其他工具结合和重定向，你可以在脚本中以多种方式使用它。使用netcat命令所能完成的事情令人惊讶。netcat(nc)所做的就是在两台电脑之间建立链接并返回两个数据流，在这之后所能做的事就看你的想像力了。你能建立一个服务器，传输文件，与朋友聊天，传输流媒体或者用它作为其它协议的独立客户端。2、参数想要"><meta name="keywords" content="Linux,nc"><meta property="og:type" content="article"><meta property="og:title" content="Linux nc命令用法"><meta property="og:url" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2018&#x2F;07&#x2F;05&#x2F;linux-nc-ming-ling-yong-fa&#x2F;index.html"><meta property="og:site_name" content="凡间的精灵"><meta property="og:description" content="1、简介netcat(nc)是网络工具中的瑞士军刀，它能通过TCP和UDP在网络中读写数据。通过与其他工具结合和重定向，你可以在脚本中以多种方式使用它。使用netcat命令所能完成的事情令人惊讶。netcat(nc)所做的就是在两台电脑之间建立链接并返回两个数据流，在这之后所能做的事就看你的想像力了。你能建立一个服务器，传输文件，与朋友聊天，传输流媒体或者用它作为其它协议的独立客户端。2、参数想要"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2019-12-25T08:38:43.494Z"><meta name="twitter:card" content="summary"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"always",offset:12,b2t:!0,scrollpercent:!0,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://chenzhonzhou.github.io/2018/07/05/linux-nc-ming-ling-yong-fa/"><title>Linux nc命令用法 | 凡间的精灵</title><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">凡间的精灵</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">凡尘落素一精灵</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i><br>站点地图</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://chenzhonzhou.github.io/2018/07/05/linux-nc-ming-ling-yong-fa/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhongzhou Chen"><meta itemprop="description" content=""><meta itemprop="image" content="/images/chen.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="凡间的精灵"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Linux nc命令用法</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-05T15:08:17+08:00">2018-07-05</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">3.7k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">14</span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h2><p><strong>netcat(nc)</strong>是网络工具中的瑞士军刀，它能通过TCP和UDP在网络中读写数据。通过与其他工具结合和重定向，你可以在脚本中以多种方式使用它。使用netcat命令所能完成的事情令人惊讶。</p><p><strong>netcat(nc)</strong>所做的就是在两台电脑之间建立链接并返回两个数据流，在这之后所能做的事就看你的想像力了。你能建立一个服务器，传输文件，与朋友聊天，传输流媒体或者用它作为其它协议的独立客户端。</p><h2 id="2、参数"><a href="#2、参数" class="headerlink" title="2、参数"></a>2、参数</h2><p>想要连接到某处: nc [-options] hostname port[s] [ports] …<br>绑定端口等待连接: nc -l port [-options] [hostname] [port]</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-g&lt;网关&gt;</td><td>设置路由器跃程通信网关，最多设置8个;</td></tr><tr><td>-G&lt;指向器数目&gt;</td><td>设置来源路由指向器，其数值为4的倍数;</td></tr><tr><td>-h</td><td>在线帮助;</td></tr><tr><td>-i&lt;延迟秒数&gt;</td><td>设置时间间隔，以便传送信息及扫描通信端口;</td></tr><tr><td>-l</td><td>使用监听模式，监控传入的资料;</td></tr><tr><td>-n</td><td>直接使用ip地址，而不通过域名服务器;</td></tr><tr><td>-o&lt;输出文件&gt;</td><td>指定文件名称，把往来传输的数据以16进制字码倾倒成该文件保存;</td></tr><tr><td>-p&lt;通信端口&gt;</td><td>设置本地主机使用的通信端口;</td></tr><tr><td>-r</td><td>指定源端口和目的端口都进行随机的选择;</td></tr><tr><td>-s&lt;来源位址&gt;</td><td>设置本地主机送出数据包的IP地址;</td></tr><tr><td>-u</td><td>使用UDP传输协议;</td></tr><tr><td>-v</td><td>显示指令执行过程;</td></tr><tr><td>-w&lt;超时秒数&gt;</td><td>设置等待连线的时间;</td></tr><tr><td>-z</td><td>使用0输入/输出模式，只在扫描通信端口时使用。</td></tr></tbody></table><h2 id="3、用法"><a href="#3、用法" class="headerlink" title="3、用法"></a>3、用法</h2><p><strong>安装nc命令</strong></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> nmap-ncat</span><br></pre></td></tr></table></figure><p>[A Server(192.168.10.1) B Client(192.168.1.1)]</p><h3 id="3-1连接到远程主机"><a href="#3-1连接到远程主机" class="headerlink" title="3.1连接到远程主机"></a>3.1连接到远程主机</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$nc</span> -nvv <span class="number">192.168</span><span class="selector-class">.x</span><span class="selector-class">.x</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>连到192.168.x.x的TCP80端口.</p><p><strong>监听本地主机:</strong></p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$nc</span> -l 80</span></span><br></pre></td></tr></table></figure><p>监听本机的TCP80端口.</p><p><strong>超时控制:</strong><br>多数情况我们不希望连接一直保持，那么我们可以使用 -w 参数来指定连接的空闲超时时间，该参数紧接一个数值，代表秒数，如果连接超过指定时间则连接会被终止。</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$nc</span> -l 2389</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc -w <span class="number">10</span> localhost <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>该连接将在 10 秒后中断。<br>注意: 不要在服务器端同时使用 -w 和 -l 参数，因为 -w 参数将在服务器端无效果。</p><h3 id="3-2-端口扫描"><a href="#3-2-端口扫描" class="headerlink" title="3.2 端口扫描"></a>3.2 端口扫描</h3><p>端口扫描经常被系统管理员和黑客用来发现在一些机器上开放的端口，帮助他们识别系统中的漏洞。</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc -z -v -n <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">21</span><span class="number">-25</span></span><br></pre></td></tr></table></figure><p>可以运行在TCP或者UDP模式，默认是TCP，-u参数调整为udp.<br>z 参数告诉netcat使用0 IO,连接成功后立即关闭连接， 不进行数据交换.<br>v 参数指详细输出.<br>n 参数告诉netcat 不要使用DNS反向查询IP地址的域名.<br>以上命令会打印21到25 所有开放的端口。</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$nc -v <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">22</span></span><br><span class="line">localhost [<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>] <span class="number">22</span> (ssh) open</span><br><span class="line">SSH<span class="number">-2.0</span>-OpenSSH_5<span class="number">.9</span>p1 Debian<span class="number">-5</span>ubuntu1<span class="number">.4</span></span><br></pre></td></tr></table></figure><p>“SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1.4”为Banner信息。Banner是一个文本，Banner是一个你连接的服务发送给你的文本信息。当你试图鉴别漏洞或者服务的类型和版本的时候，Banner信息是非常有用的。但是，并不是所有的服务都会发送banner.一旦你发现开放的端口，你可以容易的使用netcat 连接服务抓取他们的banner。</p><h3 id="3-3-Chat-Server"><a href="#3-3-Chat-Server" class="headerlink" title="3.3 Chat Server"></a>3.3 Chat Server</h3><p>假如你想和你的朋友聊聊，有很多的软件和信息服务可以供你使用。但是，如果你没有这么奢侈的配置，比如你在计算机实验室，所有的对外的连接都是被限制的，你怎样和整天坐在隔壁房间的朋友沟通那？不要郁闷了，netcat提供了这样一种方法，你只需要创建一个Chat服务器，一个预先确定好的端口，这样子他就可以联系到你了。</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$nc</span> -l 20000</span></span><br></pre></td></tr></table></figure><p>netcat 命令在20000端口启动了一个tcp 服务器，所有的标准输出和输入会输出到该端口。输出和输入都在此shell中展示。</p><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span></span><br></pre></td></tr></table></figure><p>不管你在机器B上键入什么都会出现在机器A上。</p><h3 id="3-4-文件传输"><a href="#3-4-文件传输" class="headerlink" title="3.4 文件传输"></a>3.4 文件传输</h3><p>大部分时间中，我们都在试图通过网络或者其他工具传输文件。有很多种方法，比如FTP,SCP,SMB等等，但是当你只是需要临时或者一次传输文件，真的值得浪费时间来安装配置一个软件到你的机器上嘛。假设，你想要传一个文件file.txt 从A 到B。A或者B都可以作为服务器或者客户端.</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$nc</span> -l 20000 &lt; file.txt</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc -n <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> &gt; file.txt</span><br></pre></td></tr></table></figure><p>这里我们创建了一个服务器在A上并且重定向netcat的输入为文件file.txt，那么当任何成功连接到该端口，netcat会发送file的文件内容。</p><p>在客户端我们重定向输出到file.txt，当B连接到A，A发送文件内容，B保存文件内容到file.txt.<br>没有必要创建文件源作为Server，我们也可以相反的方法使用。像下面的我们发送文件从B到A，但是服务器创建在A上，这次我们仅需要重定向netcat的输出并且重定向B的输入文件。<br>B作为Server</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$nc</span> -l 20000 &gt; file.txt</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> &lt; file.txt</span><br></pre></td></tr></table></figure><h3 id="3-5-目录传输"><a href="#3-5-目录传输" class="headerlink" title="3.5 目录传输"></a>3.5 目录传输</h3><p>发送一个文件很简单，但是如果我们想要发送多个文件，或者整个目录，一样很简单，只需要使用压缩工具tar，压缩后发送压缩包。<br>如果你想要通过网络传输一个目录从A到B。</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$tar</span> -cvf – dir_name | nc -l 20000</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc -n <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> | tar -xvf -</span><br></pre></td></tr></table></figure><p>这里在A服务器上，我们创建一个tar归档包并且通过-在控制台重定向它，然后使用管道，重定向给netcat，netcat可以通过网络发送它。<br>在客户端我们下载该压缩包通过netcat 管道然后打开文件。<br>如果想要节省带宽传输压缩包，我们可以使用bzip2或者其他工具压缩。</p><p>Server</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$tar -cvf – dir_name| <span class="type">bzip2</span> -z | <span class="type">nc</span> -l <span class="number">20000</span></span><br></pre></td></tr></table></figure><p>通过bzip2压缩</p><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc -n <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> | bzip2 -d |tar -xvf -</span><br></pre></td></tr></table></figure><h3 id="3-6-加密你通过网络发送的数据"><a href="#3-6-加密你通过网络发送的数据" class="headerlink" title="3.6 加密你通过网络发送的数据"></a>3.6 加密你通过网络发送的数据</h3><p>如果你担心你在网络上发送数据的安全，你可以在发送你的数据之前用如mcrypt的工具加密。</p><p>Server</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc localhost <span class="number">20000</span> | mcrypt –<span class="keyword">flush</span> –bare -F -q -d -m ecb &gt; <span class="keyword">file</span>.txt</span><br></pre></td></tr></table></figure><p>使用mcrypt工具加密数据。</p><p>Client</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$mcrypt –<span class="keyword">flush</span> –bare -F -q -m ecb &lt; <span class="keyword">file</span>.txt | nc -l <span class="number">20000</span></span><br></pre></td></tr></table></figure><p>使用mcrypt工具解密数据。<br>以上两个命令会提示需要密码，确保两端使用相同的密码。<br>这里我们是使用mcrypt用来加密，使用其它任意加密工具都可以。</p><h3 id="3-7-流视频"><a href="#3-7-流视频" class="headerlink" title="3.7 流视频"></a>3.7 流视频</h3><p>虽然不是生成流视频的最好方法，但如果服务器上没有特定的工具，使用netcat，我们仍然有希望做成这件事。</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$cat</span> video.avi | nc -l 20000</span></span><br></pre></td></tr></table></figure><p>这里我们只是从一个视频文件中读入并重定向输出到netcat客户端</p><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> | mplayer -vo x11 -cache <span class="number">3000</span> -</span><br></pre></td></tr></table></figure><p>这里我们从socket中读入数据并重定向到mplayer。</p><h3 id="3-8-克隆一个设备"><a href="#3-8-克隆一个设备" class="headerlink" title="3.8 克隆一个设备"></a>3.8 克隆一个设备</h3><p>如果你已经安装配置一台Linux机器并且需要重复同样的操作对其他的机器，而你不想在重复配置一遍。不在需要重复配置安装的过程，只启动另一台机器的一些引导可以随身碟和克隆你的机器。<br>克隆Linux PC很简单，假如你的系统在磁盘/dev/sda上</p><p>Server</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$dd</span> <span class="keyword">if</span>=<span class="regexp">/dev/</span>sda | nc -l <span class="number">20000</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc -n <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> | dd of=/dev/sda</span><br></pre></td></tr></table></figure><p>dd是一个从磁盘读取原始数据的工具，我通过netcat服务器重定向它的输出流到其他机器并且写入到磁盘中，它会随着分区表拷贝所有的信息。但是如果我们已经做过分区并且只需要克隆root分区，我们可以根据我们系统root分区的位置，更改sda 为sda1，sda2.等等。</p><h3 id="3-9-打开一个shell"><a href="#3-9-打开一个shell" class="headerlink" title="3.9 打开一个shell"></a>3.9 打开一个shell</h3><p>我们已经用过远程shell-使用telnet和ssh，但是如果这两个命令没有安装并且我们没有权限安装他们，我们也可以使用netcat创建远程shell。<br>假设你的netcat支持 -c -e 参数(原生 netcat)</p><p>Server</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$nc</span> -l <span class="number">20000</span> -e <span class="regexp">/bin/</span>bash -i</span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span></span><br></pre></td></tr></table></figure><p>这里我们已经创建了一个netcat服务器并且表示当它连接成功时执行/bin/bash<br>假如netcat 不支持-c 或者 -e 参数（openbsd netcat）,我们仍然能够创建远程shell</p><p>Server</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$mkfifo</span> <span class="regexp">/tmp/</span>tmp_fifo</span><br><span class="line"><span class="variable">$cat</span> <span class="regexp">/tmp/</span>tmp_fifo | <span class="regexp">/bin/</span>sh -i <span class="number">2</span>&gt;&amp;<span class="number">1</span> | nc -l <span class="number">20000</span> &gt; <span class="regexp">/tmp/</span>tmp_fifo</span><br></pre></td></tr></table></figure><p>这里我们创建了一个fifo文件，然后使用管道命令把这个fifo文件内容定向到shell 2&gt;&amp;1中。是用来重定向标准错误输出和标准输出，然后管道到netcat 运行的端口20000上。至此，我们已经把netcat的输出重定向到fifo文件中。<br><strong>说明：</strong><br>从网络收到的输入写到fifo文件中<br>cat 命令读取fifo文件并且其内容发送给sh命令<br>sh命令进程受到输入并把它写回到netcat。<br>netcat 通过网络发送输出到client<br>至于为什么会成功是因为管道使命令平行执行，fifo文件用来替代正常文件，因为fifo使读取等待而如果是一个普通文件，cat命令会尽快结束并开始读取空文件。<br>在客户端仅仅简单连接到服务器</p><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc -n <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span></span><br></pre></td></tr></table></figure><p>你会得到一个shell提示符在客户端</p><h3 id="3-10-反向shell"><a href="#3-10-反向shell" class="headerlink" title="3.10 反向shell"></a>3.10 反向shell</h3><p>反向shell又称反弹shell，是指在客户端打开的shell。反向shell这样命名是因为不同于其他配置，这里服务器使用的是由客户提供的服务。</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$nc</span> -l 20000</span></span><br></pre></td></tr></table></figure><p>在客户端，简单地告诉netcat在连接完成后，执行shell。</p><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> -e /bin/bash</span><br></pre></td></tr></table></figure><p>现在，什么是反向shell的特别之处呢<br>反向shell经常被用来绕过防火墙的限制，如阻止入站连接。例如，我有一个专用IP地址为192.168.10.1，我使用代理服务器连接到外部网络。如果我想从网络外部访问 这台机器如1.2.3.4的shell，那么我会用反向外壳用于这一目的。</p><h3 id="3-11-指定源端口"><a href="#3-11-指定源端口" class="headerlink" title="3.11 指定源端口"></a>3.11 指定源端口</h3><p>假设你的防火墙过滤除25端口外其它所有端口，你需要使用-p选项指定源端口。</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$nc</span> -l 20000</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> <span class="number">25</span></span><br></pre></td></tr></table></figure><p>使用1024以内的端口需要root权限。<br>该命令将在客户端开启25端口用于通讯，否则将使用随机端口。</p><h3 id="3-12-指定源地址"><a href="#3-12-指定源地址" class="headerlink" title="3.12 指定源地址"></a>3.12 指定源地址</h3><p>假设你的机器有多个地址，希望明确指定使用哪个地址用于外部数据通讯。我们可以在netcat中使用-s选项指定ip地址。</p><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$nc</span> -u -l 20000 &lt; file.txt</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc -u <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">20000</span> -s <span class="number">172.31</span><span class="number">.100</span><span class="number">.5</span> &gt; file.txt</span><br></pre></td></tr></table></figure><p>该命令将绑定地址172.31.100.5。</p><h3 id="3-13-静态web页面服务器"><a href="#3-13-静态web页面服务器" class="headerlink" title="3.13 静态web页面服务器"></a>3.13 静态web页面服务器</h3><p>新建一个网页,命名为somepage.html;<br>新建一个shell script:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    nc -l <span class="number">80</span> -q <span class="number">1</span> &lt; somepage.html;</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>用root权限执行，然后在浏览器中输入127.0.0.1打开看看是否正确运行。<br>nc 指令通常都是給管理者進行除錯或測試等動作用的，所以如果只是單純需要臨時的網頁伺服器，使用 Python 的 SimpleHTTPServer 模組會比較方便。</p><h3 id="3-14-模拟HTTP-Headers"><a href="#3-14-模拟HTTP-Headers" class="headerlink" title="3.14 模拟HTTP Headers"></a>3.14 模拟HTTP Headers</h3><blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$nc</span> www<span class="selector-class">.huanxiangwu</span><span class="selector-class">.com</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>GET / HTTP/1.1<br>Host: ispconfig.org<br>Referrer: mypage.com<br>User-Agent: my-browser</p><p>HTTP/1.1 200 OK<br>Date: Tue, 16 Dec 2008 07:23:24 GMT<br>Server: Apache/2.2.6 (Unix) DAV/2 mod_mono/1.2.1 mod_python/3.2.8 Python/2.4.3 mod_perl/2.0.2 Perl/v5.8.8<br>Set-Cookie: PHPSESSID=bbadorbvie1gn037iih6lrdg50; path=/<br>Expires: 0<br>Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0<br>Pragma: no-cache<br>Cache-Control: private, post-check=0, pre-check=0, max-age=0<br>Set-Cookie: oWn_sid=xRutAY; expires=Tue, 23-Dec-2008 07:23:24 GMT; path=/<br>Vary: Accept-Encoding<br>Transfer-Encoding: chunked<br>Content-Type: text/html<br>[……]</p></blockquote><p>在nc命令后，输入例如以上内容，然后按两次回车，即可从对方获得HTTP Headers内容。</p><h3 id="3-15-Netcat支持IPv6"><a href="#3-15-Netcat支持IPv6" class="headerlink" title="3.15 Netcat支持IPv6"></a>3.15 Netcat支持IPv6</h3><p>netcat 的 -4 和 -6 参数用来指定 IP 地址类型，分别是 IPv4 和 IPv6：</p><p>Server</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc <span class="number">-4</span> -l <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc <span class="number">-4</span> localhost <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>然后我们可以使用 netstat 命令来查看网络的情况：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ netstat | grep <span class="number">2389</span></span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> localhost:<span class="number">2389</span>          localhost:<span class="number">50851</span>         ESTABLISHED</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> localhost:<span class="number">50851</span>         localhost:<span class="number">2389</span>          ESTABLISHED</span><br></pre></td></tr></table></figure><p>接下来我们看看IPv6 的情况：</p><p>Server</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc <span class="number">-6</span> -l <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc <span class="number">-6</span> localhost <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>再次运行 netstat 命令：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ netstat | grep <span class="number">2389</span></span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> localhost:<span class="number">2389</span>          localhost:<span class="number">33234</span>         ESTABLISHED</span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> localhost:<span class="number">33234</span>         localhost:<span class="number">2389</span>          ESTABLISHED</span><br></pre></td></tr></table></figure><p>前缀是 tcp6 表示使用的是 IPv6 的地址。</p><h3 id="14-在-Netcat-中禁止从标准输入中读取数据"><a href="#14-在-Netcat-中禁止从标准输入中读取数据" class="headerlink" title="14.在 Netcat 中禁止从标准输入中读取数据"></a>14.在 Netcat 中禁止从标准输入中读取数据</h3><p>该功能使用 -d 参数，请看下面例子：</p><p>Server</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc -l <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ nc -d localhost <span class="number">2389</span></span><br><span class="line">Hi</span><br></pre></td></tr></table></figure><p>你输入的 Hi 文本并不会送到服务器端。</p><h3 id="3-16-强制-Netcat-服务器端保持启动状态"><a href="#3-16-强制-Netcat-服务器端保持启动状态" class="headerlink" title="3.16 强制 Netcat 服务器端保持启动状态"></a>3.16 强制 Netcat 服务器端保持启动状态</h3><p>如果连接到服务器的客户端断开连接，那么服务器端也会跟着退出。</p><p>Server</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc -l <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ nc localhost <span class="number">2389</span></span><br><span class="line">^C</span><br></pre></td></tr></table></figure><p>Server</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> nc -l <span class="number">2389</span></span><br><span class="line"><span class="symbol">$</span></span><br></pre></td></tr></table></figure><p>上述例子中，但客户端断开时服务器端也立即退出。<br>我们可以通过 -k 参数来控制让服务器不会因为客户端的断开连接而退出。</p><p>Server</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc -k -l <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ nc localhost <span class="number">2389</span></span><br><span class="line">^C</span><br></pre></td></tr></table></figure><p>Server</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc -k -l <span class="number">2389</span></span><br></pre></td></tr></table></figure><h3 id="3-17-配置-Netcat-客户端不会因为-EOF-而退出"><a href="#3-17-配置-Netcat-客户端不会因为-EOF-而退出" class="headerlink" title="3.17 配置 Netcat 客户端不会因为 EOF 而退出"></a>3.17 配置 Netcat 客户端不会因为 EOF 而退出</h3><p>Netcat 客户端可以通过 -q 参数来控制接收到 EOF 后隔多长时间才退出，该参数的单位是秒：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Client</span><br><span class="line"><span class="variable">$nc</span>  -<span class="selector-tag">q</span> <span class="number">5</span>  localhost <span class="number">2389</span></span><br></pre></td></tr></table></figure><p>现在如果客户端接收到 EOF ，它将等待 5 秒后退出。</p><h3 id="3-18-手动使用-SMTP-协议寄信"><a href="#3-18-手动使用-SMTP-协议寄信" class="headerlink" title="3.18 手动使用 SMTP 协议寄信"></a>3.18 手动使用 SMTP 协议寄信</h3><p>在测试邮件务服器是否正常时，可以使用这样的方式手动寄送 Email：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$nc</span> localhost <span class="number">25</span> &lt;&lt; EOF</span><br><span class="line">HELO host<span class="selector-class">.example</span><span class="selector-class">.com</span></span><br><span class="line">MAIL FROM: &lt;user@host<span class="selector-class">.example</span><span class="selector-class">.com</span>&gt;</span><br><span class="line">RCPT TO: &lt;user2@host<span class="selector-class">.example</span><span class="selector-class">.com</span>&gt;</span><br><span class="line">DATA</span><br><span class="line">Body of email.</span><br><span class="line">.</span><br><span class="line">QUIT</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h3 id="3-19-透明代理务服器（Proxy）连接"><a href="#3-19-透明代理务服器（Proxy）连接" class="headerlink" title="3.19 透明代理务服器（Proxy）连接"></a>3.19 透明代理务服器（Proxy）连接</h3><p>该指令会使用 10.2.3.4:8080 这个代理务服器，连接至 host.example.com 的42端口。</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$nc -x10<span class="number">.2</span><span class="number">.3</span><span class="number">.4</span>:<span class="number">8080</span> -Xconnect host.example.com <span class="number">42</span></span><br></pre></td></tr></table></figure><h3 id="3-20-使用-Unix-Domain-Socket"><a href="#3-20-使用-Unix-Domain-Socket" class="headerlink" title="3.20 使用 Unix Domain Socket"></a>3.20 使用 Unix Domain Socket</h3><p>该行指令会建立一个 Unix Domain Socket，并接收资料：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$nc</span> -lU <span class="regexp">/var/</span>tmp<span class="regexp">/dsocket</span></span><br></pre></td></tr></table></figure></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a><a href="/tags/nc/" rel="tag"><i class="fa fa-tag"></i> nc</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/06/29/mysql-bao-cuo-xu-hao-he-dui-ying-de-cuo-wu/" rel="next" title="MySQL 报错序号和对应的错误"><i class="fa fa-chevron-left"></i> MySQL 报错序号和对应的错误</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2018/07/12/shadowsocks-shi-yong-kcptun-jia-su/" rel="prev" title="Shadowsocks使用Kcptun加速">Shadowsocks使用Kcptun加速<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"><div class="jiathis_style"><span class="jiathis_txt">分享到：</span> <a class="jiathis_button_fav">收藏夹</a> <a class="jiathis_button_copy">复制网址</a> <a class="jiathis_button_email">邮件</a> <a class="jiathis_button_weixin">微信</a> <a class="jiathis_button_qzone">QQ空间</a> <a class="jiathis_button_tqq">腾讯微博</a> <a class="jiathis_button_douban">豆瓣</a> <a class="jiathis_button_share">一键分享</a> <a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a><a class="jiathis_counter_style"></a></div><script type="text/javascript">var jiathis_config={data_track_clickback:!0,summary:"",shortUrl:!1,hideMore:!1}</script><script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/chen.png" alt="Zhongzhou Chen"><p class="site-author-name" itemprop="name">Zhongzhou Chen</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/%7C%7C%20archive"><span class="site-state-item-count">286</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">84</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">164</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、简介"><span class="nav-text">1、简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、参数"><span class="nav-text">2、参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、用法"><span class="nav-text">3、用法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1连接到远程主机"><span class="nav-text">3.1连接到远程主机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-端口扫描"><span class="nav-text">3.2 端口扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-Chat-Server"><span class="nav-text">3.3 Chat Server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-文件传输"><span class="nav-text">3.4 文件传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-目录传输"><span class="nav-text">3.5 目录传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-加密你通过网络发送的数据"><span class="nav-text">3.6 加密你通过网络发送的数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-流视频"><span class="nav-text">3.7 流视频</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-克隆一个设备"><span class="nav-text">3.8 克隆一个设备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-打开一个shell"><span class="nav-text">3.9 打开一个shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-反向shell"><span class="nav-text">3.10 反向shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-11-指定源端口"><span class="nav-text">3.11 指定源端口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-12-指定源地址"><span class="nav-text">3.12 指定源地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-13-静态web页面服务器"><span class="nav-text">3.13 静态web页面服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-14-模拟HTTP-Headers"><span class="nav-text">3.14 模拟HTTP Headers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-15-Netcat支持IPv6"><span class="nav-text">3.15 Netcat支持IPv6</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-在-Netcat-中禁止从标准输入中读取数据"><span class="nav-text">14.在 Netcat 中禁止从标准输入中读取数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-16-强制-Netcat-服务器端保持启动状态"><span class="nav-text">3.16 强制 Netcat 服务器端保持启动状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-17-配置-Netcat-客户端不会因为-EOF-而退出"><span class="nav-text">3.17 配置 Netcat 客户端不会因为 EOF 而退出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-18-手动使用-SMTP-协议寄信"><span class="nav-text">3.18 手动使用 SMTP 协议寄信</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-19-透明代理务服器（Proxy）连接"><span class="nav-text">3.19 透明代理务服器（Proxy）连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-20-使用-Unix-Domain-Socket"><span class="nav-text">3.20 使用 Unix Domain Socket</span></a></li></ol></li></ol></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">Zhongzhou Chen</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">Site words total count&#58;</span> <span title="Site words total count">601.1k</span></div><span class="post-meta-divider"></span></div></footer></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,s){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var o=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,n=document.getElementById(e),r=document.getElementById(s);n.addEventListener("input",function(){var y=n.value.trim().toLowerCase(),T=y.split(/[\s\-]+/);1<T.length&&T.push(y);var b=[];if(0<y.length&&o.forEach(function(t){function e(t,e,o,n){for(var r=n[n.length-1],s=r.position,a=r.word,i=[],c=0;s+a.length<=o&&0!=n.length;){a===y&&c++,i.push({position:s,length:a.length});var l=s+a.length;for(n.pop();0!=n.length&&(s=(r=n[n.length-1]).position,a=r.word,s<l);)n.pop()}return h+=c,{hits:i,start:e,end:o,searchTextCount:c}}function o(o,t){var n="",r=t.start;return t.hits.forEach(function(t){n+=o.substring(r,t.position);var e=t.position+t.length;n+='<b class="search-keyword">'+o.substring(t.position,e)+"</b>",r=e}),n+=o.substring(r,t.end)}var n=!1,r=0,h=0,s=t.title.trim(),a=s.toLowerCase(),i=t.content.trim().replace(/<[^>]+>/g,""),c=i.toLowerCase(),l=decodeURIComponent(t.url),p=[],u=[];if(""!=s&&(T.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());-1<(s=e.indexOf(t,r));)a.push({position:s,word:t}),r=s+n;return a}p=p.concat(e(t,a,!1)),u=u.concat(e(t,c,!1))}),(0<p.length||0<u.length)&&(n=!0,r=p.length+u.length)),n){[p,u].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var f=[];0!=p.length&&f.push(e(0,0,s.length,p));for(var d=[];0!=u.length;){var g=u[u.length-1],v=g.position,$=g.word,C=v-20,m=v+80;C<0&&(C=0),m<v+$.length&&(m=v+$.length),m>i.length&&(m=i.length),d.push(e(0,C,m,u))}d.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var x=parseInt("1");0<=x&&(d=d.slice(0,x));var w="";w+=0!=f.length?"<li><a href='"+l+"' class='search-result-title'>"+o(s,f[0])+"</a>":"<li><a href='"+l+"' class='search-result-title'>"+s+"</a>",d.forEach(function(t){w+="<a href='"+l+'\'><p class="search-result">'+o(i,t)+"...</p></a>"}),w+="</li>",b.push({item:w,searchTextCount:h,hitCount:r,id:b.length})}}),1===T.length&&""===T[0])r.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===b.length)r.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{b.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var e='<ul class="search-result-list">';b.forEach(function(t){e+=t.item}),e+="</ul>",r.innerHTML=e}}),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),!1===isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){27===t.which&&$(".search-popup").is(":visible")&&onPopupClose()})</script><script type="text/javascript" src="/js/src/love.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/shizuku.model.json"},display:{position:"right"},mobile:{show:!0,scale:.5},react:{opacityDefault:.7,opacityOnHover:.2}})</script></body></html>