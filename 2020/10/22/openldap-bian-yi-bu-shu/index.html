<!-- build time:Sun Dec 03 2023 14:39:01 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><script></script><meta name="theme-color" content="#222"><style>.pace .pace-progress{background:#1E92FB;height:3px}.pace .pace-progress-inner{box-shadow:0 0 10px #1E92FB,0 0 5px #1E92FB}.pace .pace-activity{border-top-color:#1E92FB;border-left-color:#1E92FB}</style><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="HGM141IpbHrSmnAmR6W_zE4bo9Z3f-yXLeHYT3bg1fk"><meta name="baidu-site-verification" content="code-5Ai1DA8e6T"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="OpenLDAP,LDAP,"><link rel="alternate" href="/atom.xml" title="凡间的精灵" type="application/atom+xml"><meta name="description" content="一．环境组件名称版本IP地址OpenLDAP2.4.4192.168.48.132berkeley-db5.1.29192.168.48.132ldapadmin二．软件获取OpenLDAPOpenLDAP 官网下载地址：http:&#x2F;&#x2F;www.openldap.org&#x2F;software&#x2F;download&#x2F;OpenLDAP 2.4.44：ftp:&#x2F;&#x2F;ftp.openldap.org&#x2F;pub&#x2F;Open"><meta name="keywords" content="OpenLDAP,LDAP"><meta property="og:type" content="article"><meta property="og:title" content="OpenLDAP 部署"><meta property="og:url" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;index.html"><meta property="og:site_name" content="凡间的精灵"><meta property="og:description" content="一．环境组件名称版本IP地址OpenLDAP2.4.4192.168.48.132berkeley-db5.1.29192.168.48.132ldapadmin二．软件获取OpenLDAPOpenLDAP 官网下载地址：http:&#x2F;&#x2F;www.openldap.org&#x2F;software&#x2F;download&#x2F;OpenLDAP 2.4.44：ftp:&#x2F;&#x2F;ftp.openldap.org&#x2F;pub&#x2F;Open"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%871.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%872.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%873.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%874.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%875.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%876.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%877.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%878.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%879.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%8710.png"><meta property="og:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%8711.png"><meta property="og:updated_time" content="2020-11-03T07:15:29.477Z"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http:&#x2F;&#x2F;chenzhonzhou.github.io&#x2F;2020&#x2F;10&#x2F;22&#x2F;openldap-bian-yi-bu-shu&#x2F;%E5%9B%BE%E7%89%871.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"always",offset:12,b2t:!0,scrollpercent:!0,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://chenzhonzhou.github.io/2020/10/22/openldap-bian-yi-bu-shu/"><title>OpenLDAP 部署 | 凡间的精灵</title><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">凡间的精灵</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">凡尘落素一精灵</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i><br>站点地图</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://chenzhonzhou.github.io/2020/10/22/openldap-bian-yi-bu-shu/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Zhongzhou Chen"><meta itemprop="description" content=""><meta itemprop="image" content="/images/chen.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="凡间的精灵"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">OpenLDAP 部署</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-10-22T10:16:15+08:00">2020-10-22 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/LDAP/" itemprop="url" rel="index"><span itemprop="name">LDAP</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/LDAP/OpenLDAP/" itemprop="url" rel="index"><span itemprop="name">OpenLDAP</span></a></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">2.1k </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">9</span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="一．环境"><a href="#一．环境" class="headerlink" title="一．环境"></a>一．环境</h1><table><thead><tr><th>组件名称</th><th>版本</th><th>IP地址</th></tr></thead><tbody><tr><td>OpenLDAP</td><td>2.4.4</td><td>192.168.48.132</td></tr><tr><td>berkeley-db</td><td>5.1.29</td><td>192.168.48.132</td></tr><tr><td>ldapadmin</td><td></td><td></td></tr></tbody></table><h1 id="二．软件获取"><a href="#二．软件获取" class="headerlink" title="二．软件获取"></a>二．软件获取</h1><h2 id="OpenLDAP"><a href="#OpenLDAP" class="headerlink" title="OpenLDAP"></a>OpenLDAP</h2><p>OpenLDAP 官网下载地址：<a href="http://www.openldap.org/software/download/" target="_blank" rel="noopener">http://www.openldap.org/software/download/</a></p><p>OpenLDAP 2.4.44：<a href="ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-2.4.44.tgz" target="_blank" rel="noopener">ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-2.4.44.tgz</a></p><h2 id="BDB"><a href="#BDB" class="headerlink" title="BDB"></a>BDB</h2><p>berkeley-db-5.1.29 <strong>(OpenLDAP**</strong>当前与6.x版本不兼容，READEME中明确写出兼容4.4-4.8或5.0-5.1)**：</p><p><a href="http://download.oracle.com/berkeley-db/db-5.1.29.tar.gz" target="_blank" rel="noopener">http://download.oracle.com/berkeley-db/db-5.1.29.tar.gz</a></p><h2 id="LDAP-Administrtor"><a href="#LDAP-Administrtor" class="headerlink" title="LDAP Administrtor"></a>LDAP Administrtor</h2><p>ldapadmin 2015.2：</p><p>官网下载地址：<a href="http://www.ldapbrowser.com/download.htm" target="_blank" rel="noopener">http://www.ldapbrowser.com/download.htm</a></p><p>64-bit：<a href="http://softerra-downloads.com/ldapadmin/ldapadmin-4.13.16704.0-x64-eng.msi" target="_blank" rel="noopener">http://softerra-downloads.com/ldapadmin/ldapadmin-4.13.16704.0-x64-eng.msi</a></p><h1 id="三．准备"><a href="#三．准备" class="headerlink" title="三．准备"></a>三．准备</h1><ul><li>关闭selinux；</li><li>打开防火墙tcp 389 / 636端口。</li></ul><blockquote><p><strong>tcp 389 是openldap 明文传输端口，tcp 636是ssl加密传输的端口。</strong><br><strong>centos7默认自带firewalld服务，可以停用之后安装iptables。</strong></p></blockquote><h1 id="四．安装OpenLDAP"><a href="#四．安装OpenLDAP" class="headerlink" title="四．安装OpenLDAP"></a>四．安装OpenLDAP</h1><h2 id="4-1-依赖包"><a href="#4-1-依赖包" class="headerlink" title="4.1 依赖包"></a>4.1 依赖包</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 涉及libtool-ltdl与libtool-ltdl-devel，如不安装，在编译时报错：configure: error: could not locate libtool ltdl.h</span></span><br><span class="line">[root@localhost ~]# yum install *ltdl* gcc gcc-c++ -y</span><br></pre></td></tr></tbody></table></figure><h2 id="4-2-安装BDB"><a href="#4-2-安装BDB" class="headerlink" title="4.2 安装BDB"></a>4.2 安装BDB</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">必须在解压包的build_unix目录中编译安装，否则会报错</span></span><br><span class="line">[root@localhost ~]# cd downloads/</span><br><span class="line">[root@localhost src]# tar -zxvf db-5.1.29.tar.gz</span><br><span class="line">[root@localhost src]# cd db-5.1.29/build_unix/</span><br><span class="line">[root@localhost build_unix]# ../dist/configure --prefix=/work/admin/berkeleydb-5.1.29</span><br><span class="line">[root@localhost build_unix]# make</span><br><span class="line">[root@localhost build_unix]# make install</span><br></pre></td></tr></tbody></table></figure><h2 id="4-3-更新lib库"><a href="#4-3-更新lib库" class="headerlink" title="4.3 更新lib库"></a>4.3 更新lib库</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">保证在后面编译openldap时能找到lib和include下的库</span></span><br><span class="line">[root@localhost src]# echo "/work/admin/berkeleydb-5.1.29/lib/" &gt; /etc/ld.so.conf</span><br><span class="line">[root@localhost src]# ldconfig -v</span><br></pre></td></tr></tbody></table></figure><h2 id="4-4-安装OpenLDAP"><a href="#4-4-安装OpenLDAP" class="headerlink" title="4.4 安装OpenLDAP"></a>4.4 安装OpenLDAP</h2><p>安装依赖</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum -y install openldap-devel</span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">编译选项可以通过./configure --<span class="built_in">help</span>查看；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">其中make <span class="built_in">test</span>一步时间较长；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">如果未设置CPPFLAGS，configure过程可能会提示configure: error: BDB/HDB: BerkeleyDB not available 或 configure: error: BerkeleyDB version incompatible with BDB/HDB backends</span></span><br><span class="line">[root@localhost ~]# cd downloads/</span><br><span class="line">[root@localhost src]# tar -zxvf openldap-2.4.44.tgz</span><br><span class="line">[root@localhost src]# cd openldap-2.4.44</span><br><span class="line">[root@localhost openldap-2.4.44]# ./configure --prefix=/work/admin/openldap-2.4.44 --enable-syslog --enable-modules --enable-debug --with-tls CPPFLAGS=-I/work/admin/berkeleydb-5.1.29/include/ LDFLAGS=-L/work/admin/berkeleydb-5.1.29/lib/</span><br><span class="line">[root@localhost openldap-2.4.44]# make depend</span><br><span class="line">[root@localhost openldap-2.4.44]# make</span><br><span class="line">[root@localhost openldap-2.4.44]# make test</span><br><span class="line">[root@localhost openldap-2.4.44]# make install</span><br></pre></td></tr></tbody></table></figure><h2 id="4-5-设置可执行命令"><a href="#4-5-设置可执行命令" class="headerlink" title="4.5 设置可执行命令"></a>4.5 设置可执行命令</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">对openldap客户端（bin）与服务器端（sbin）相关执行档添加软链接，也可以通过增加环境变量的方式设置</span></span><br><span class="line">[root@localhost openldap-2.4.44]# ln -s /work/admin/openldap-2.4.44/bin/* /usr/local/bin/</span><br><span class="line">[root@localhost openldap-2.4.44]# ln -s /work/admin/openldap-2.4.44/sbin/* /usr/local/sbin/</span><br></pre></td></tr></tbody></table></figure><h1 id="五．简单配置"><a href="#五．简单配置" class="headerlink" title="五．简单配置"></a>五．简单配置</h1><h2 id="5-1-安装完成的openldap-2-4-44目录结构"><a href="#5-1-安装完成的openldap-2-4-44目录结构" class="headerlink" title="5.1 安装完成的openldap-2.4.44目录结构"></a>5.1 安装完成的openldap-2.4.44目录结构</h2><blockquote><p>openldap安装完成后相关目录承载的功能如下：</p><p>bin/ –客户端工具如ldapadd、ldapsearch</p><p>etc/ –包含主配置文件slapd.conf、schema、DB_CONFIG等</p><p>include/</p><p>lib/</p><p>libexec/ –服务端启动工具slapd</p><p>sbin/ –服务端工具如slappasswd</p><p>share/</p><p>var/ –bdb数据、log存放目录</p></blockquote><h2 id="5-2-配置rootdn密码-optional"><a href="#5-2-配置rootdn密码-optional" class="headerlink" title="5.2 配置rootdn密码(optional)"></a>5.2 配置rootdn密码(optional)</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">设置rootdn密码，这里设置为123456；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">这样rootdn密码为密文方式，复制输出密文到主配置文件rootdn对应的位置即可，如果不想麻烦，可以忽略此步，在主配置文件中使用明文即可。</span></span><br><span class="line">[root@localhost ~]# cd /work/admin/openldap-2.4.44/</span><br><span class="line">[root@localhost openldap-2.4.44]# slappasswd</span><br><span class="line">New password:</span><br><span class="line">Re-enter new password:</span><br><span class="line">{SSHA}wMKKQPGtbqDq4imRsPG2zn3ZC04LdDGW</span><br></pre></td></tr></tbody></table></figure><h2 id="5-3-主配置文件slapd-conf"><a href="#5-3-主配置文件slapd-conf" class="headerlink" title="5.3 主配置文件slapd.conf"></a>5.3 主配置文件slapd.conf</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">root@localhost openldap-2.4.44]# cd /work/admin/openldap-2.4.44/etc/openldap/</span><br><span class="line">[root@localhost openldap]# vim slapd.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">以下修改紫红色字体是未做修改的部分，红色字体是有修改部分，蓝色字体表示新增部分</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">schema默认只有core.schema，各级需要添加，这里将同配置文件一个目录的schema目录中有的schema文件都加到配置文件中;</span></span><br><span class="line">include         /work/admin/openldap-2.4.44/etc/openldap/schema/core.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/collective.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/corba.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/cosine.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/duaconf.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/dyngroup.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/inetorgperson.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/java.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/misc.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/nis.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/openldap.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/pmi.schema</span><br><span class="line">include /work/admin/openldap-2.4.44/etc/openldap/schema/ppolicy.schema</span><br><span class="line"></span><br><span class="line">pidfile        /work/admin/openldap-2.4.44/var/run/slapd.pid</span><br><span class="line">argsfile    /work/admin/openldap-2.4.44/var/run/slapd.args</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">新增日志文件级别与路径，需要在编译时--<span class="built_in">enable</span>-debug，否则日志文件输出，不影响调试模式;</span></span><br><span class="line">loglevel    256</span><br><span class="line">logfile    /work/admin/openldap-2.4.44/var/slapd.log</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">这里使用mdb做后端数据库，也可修改为<span class="string">"bdb"</span>参数，在OpenLDAP 官方文档<span class="string">" 11.4. LMDB"</span>章节中有介绍mdb是推荐使用的后端数据库;</span></span><br><span class="line">database    mdb</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">使用mdb做后端数据库时，根据官方文档中说明需要设置一个空间值，<span class="string">" In addition to the usual parameters that a minimal configuration requires, the mdb backend requires a maximum size to be set. This should be the largest that the database is ever anticipated to grow (in bytes). The filesystem must also provide enough free space to accommodate this size."</span>；如果使用bdb做后端数据库，需要将此项参数注释;</span></span><br><span class="line">maxsize        1073741824</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">修改域名及管理员账户名;</span></span><br><span class="line">suffix        "dc=sys,dc=com"</span><br><span class="line">rootdn        "cn=admin,dc=sys,dc=com"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">使用密文密码，即前面使用slappasswd生成的密文;</span></span><br><span class="line">rootpw        {SSHA}wMKKQPGtbqDq4imRsPG2zn3ZC04LdDGW</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">openldap数据目录，采用mdb时，在相应目录生成<span class="string">" data.mdb"</span>与<span class="string">" lock.mdb"</span>文件；采用bdb时，在相应目录生成<span class="string">" dn2id.bdb"</span>与<span class="string">" id2entry.bdb"</span>，及多个<span class="string">" __db.00*"</span>文件。</span></span><br><span class="line">directory    /work/admin/openldap-2.4.44/var/openldap-data</span><br><span class="line"></span><br><span class="line">index    objectClass    eq</span><br></pre></td></tr></tbody></table></figure><h2 id="5-4-初始化OpenLADP-optional"><a href="#5-4-初始化OpenLADP-optional" class="headerlink" title="5.4 初始化OpenLADP(optional)"></a>5.4 初始化OpenLADP(optional)</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">如果采用mdb做后端数据库，此步可忽略，DB_CONFIG是 bdb/hdb数据库使用的；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">与主配置文件中的配置有关，主配置文件确定使用bdb与数据存放路径。</span></span><br><span class="line">[root@localhost openldap]# cd /work/admin/openldap-2.4.44/var/openldap-data/</span><br><span class="line">[root@localhost openldap-data]# cp DB_CONFIG.example DB_CONFIG</span><br></pre></td></tr></tbody></table></figure><h2 id="5-5-启动OpenLADP"><a href="#5-5-启动OpenLADP" class="headerlink" title="5.5 启动OpenLADP"></a>5.5 启动OpenLADP</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">直接在后台工作;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">非root用户不能监听端口1~1024，如果是非root用户，有可能需要重新定义服务端口</span></span><br><span class="line">[root@localhost ~]# /work/admin/openldap-2.4.44/libexec/slapd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">在前端工作，输出debug信息</span></span><br><span class="line">[root@localhost ~]# /work/admin/openldap-2.4.44/libexec/slapd -d 256</span><br></pre></td></tr></tbody></table></figure><h2 id="5-6-验证"><a href="#5-6-验证" class="headerlink" title="5.6 验证"></a>5.6 验证</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ldapsearch -x -b '' -s base'(objectclass=*)'</span><br><span class="line"><span class="meta">#</span><span class="bash">或者</span></span><br><span class="line">[root@localhost ~]# ldapsearch -x -b '' -s base '(objectclass=*)' namingContexts</span><br><span class="line"><span class="meta">#</span><span class="bash">或者使用</span></span><br><span class="line">[root@localhost ~]# netstat -tunlp | grep 389，ps -ef | grep slapd，ps aux | grep slapd</span><br><span class="line"><span class="meta">#</span><span class="bash">等也可。</span></span><br><span class="line">如图示，说明openldap已经启动运行成功：</span><br></pre></td></tr></tbody></table></figure><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%871.png" alt="图片1"></p><h1 id="六．简单使用-示例"><a href="#六．简单使用-示例" class="headerlink" title="六．简单使用(示例)"></a>六．简单使用(示例)</h1><h2 id="61-创建1个管理员账号"><a href="#61-创建1个管理员账号" class="headerlink" title="61 创建1个管理员账号"></a>61 创建1个管理员账号</h2><h3 id="编辑ldif文件"><a href="#编辑ldif文件" class="headerlink" title="编辑ldif文件"></a>编辑ldif文件</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">注意与slapd.conf文件中保持一致，下面的命令同理，</span></span><br><span class="line">[root@localhost ~]# vim test.ldif</span><br><span class="line">dn: dc=sys,dc=com</span><br><span class="line">objectclass: dcObject</span><br><span class="line">objectclass: organization</span><br><span class="line">o: SYS.Inc</span><br><span class="line">dc: sys</span><br><span class="line"></span><br><span class="line">dn: cn=admin,dc=sys,dc=com</span><br><span class="line">objectclass: organizationalRole</span><br><span class="line">cn: admin</span><br></pre></td></tr></tbody></table></figure><h3 id="插入数据库"><a href="#插入数据库" class="headerlink" title="插入数据库"></a>插入数据库</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ldapadd -x -D "cn=admin,dc=sys,dc=com" -W -f test.ldif</span><br></pre></td></tr></tbody></table></figure><p>可以看到账号已经加入到ldap中：</p><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%872.png" alt="图片2"></p><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ldapsearch -x -b 'dc=sys,dc=com' '(objectClass=*)'</span><br></pre></td></tr></tbody></table></figure><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%873.png" alt="图片3"></p><h2 id="6-2-创建1个具有部门属性的员工"><a href="#6-2-创建1个具有部门属性的员工" class="headerlink" title="6.2 创建1个具有部门属性的员工"></a>6.2 创建1个具有部门属性的员工</h2><h3 id="编辑ldif文件-1"><a href="#编辑ldif文件-1" class="headerlink" title="编辑ldif文件"></a>编辑ldif文件</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">这里其实是先创建1个部门”it”，再在”it”部门创建了1个员工，实际上是两条命令</span></span><br><span class="line">[root@localhost ~]# vim test2.ldif </span><br><span class="line"></span><br><span class="line">dn: ou=it,dc=sys,dc=com</span><br><span class="line">ou: it</span><br><span class="line">objectClass: organizationalUnit</span><br><span class="line"></span><br><span class="line">dn: cn=test1,ou=it,dc=sys,dc=com</span><br><span class="line">ou: it</span><br><span class="line">cn: test1</span><br><span class="line">sn: t1</span><br><span class="line">objectClass: inetOrgPerson</span><br><span class="line">objectClass: organizationalPerson</span><br></pre></td></tr></tbody></table></figure><h3 id="插入数据库-1"><a href="#插入数据库-1" class="headerlink" title="插入数据库"></a>插入数据库</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ldapadd -x -D "cn=admin,dc=sys,dc=com" -W -f test2.ldif</span><br></pre></td></tr></tbody></table></figure><p>可以看到已经员工账号加入到ldap中：</p><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%874.png" alt="图片4"></p><h3 id="验证-1"><a href="#验证-1" class="headerlink" title="验证"></a>验证</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ldapsearch -x -b 'dc=sys,dc=com' '(objectClass=*)'</span><br></pre></td></tr></tbody></table></figure><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%875.png" alt="图片5"></p><h2 id="6-3-ldapadmin"><a href="#6-3-ldapadmin" class="headerlink" title="6.3 ldapadmin"></a>6.3 ldapadmin</h2><h3 id="运行ldapadmin"><a href="#运行ldapadmin" class="headerlink" title="运行ldapadmin"></a>运行ldapadmin</h3><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%876.png" alt="图片6"></p><h3 id="创建数据库文件"><a href="#创建数据库文件" class="headerlink" title="创建数据库文件"></a>创建数据库文件</h3><p>New—&gt;New Profile，或者在主界面中Ctrl+P；</p><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%877.png" alt="图片7"></p><p>输入Profile名字，名字任意，下一步；</p><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%878.png" alt="图片8"></p><p>输入Host地址，Port默认为389(注意iptables是否开放389端口)；</p><p>BaseDN处默认为空，标示在根节点上，如果不想显示根节点，可在后方下拉列表中选择具体的一级数据库，下一步；</p><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%879.png" alt="图片9"></p><p>选择”Other credenti”，</p><p>Mechanism选择”Simple”，</p><p>Princip处输入”cn=admin,dc=sys,dc=com”，</p><p>Password处填写相应密码，保存密码，点击”完成”即创建成功。</p><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%8710.png" alt="图片10"></p><h3 id="验证-2"><a href="#验证-2" class="headerlink" title="验证"></a>验证</h3><p><img src="/2020/10/22/openldap-bian-yi-bu-shu/%E5%9B%BE%E7%89%8711.png" alt="图片11"></p><p>其它ldapadmin管理工具：<a href="http://www.ldapadmin.org/download/index.html" target="_blank" rel="noopener">http://www.ldapadmin.org/download/index.html</a></p><h1 id="七．附录"><a href="#七．附录" class="headerlink" title="七．附录"></a>七．附录</h1><h2 id="7-1-常见对象属性"><a href="#7-1-常见对象属性" class="headerlink" title="7.1 常见对象属性"></a>7.1 常见对象属性</h2><p>LDAP为人员组织机构中常见的对象都设计了属性(比如commonName，surname)。下面有一些常用的别名：</p><table><thead><tr><th><strong>属性名称</strong></th><th><strong>属性别名</strong></th><th><strong>语法</strong></th><th><strong>描述</strong></th><th><strong>值（举例）</strong></th></tr></thead><tbody><tr><td>commonName</td><td>cn</td><td>Directory String</td><td>名子</td><td>sean</td></tr><tr><td>surname</td><td>sn</td><td>Directory String</td><td>姓氏</td><td>Chow</td></tr><tr><td>organizationalUnitName</td><td>ou</td><td>Directory String</td><td>单位（部门）名称</td><td>IT_SECTION</td></tr><tr><td>organization</td><td>o</td><td>Directory String</td><td>组织（公司）名称</td><td>linuxprobe</td></tr><tr><td>telephoneNumber</td><td></td><td>Telephone Number</td><td>电话号码</td><td>131<code>********</code></td></tr><tr><td>objectClass</td><td></td><td></td><td>内置属性</td><td>organizationa</td></tr></tbody></table><h2 id="7-2-ldif文件示例"><a href="#7-2-ldif文件示例" class="headerlink" title="7.2 ldif文件示例"></a>7.2 ldif文件示例</h2><p><a href="http://seanlook.com/2015/01/22/openldap_ldif_example/" target="_blank" rel="noopener">http://seanlook.com/2015/01/22/openldap_ldif_example/</a></p><script>document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });</script></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/OpenLDAP/" rel="tag"><i class="fa fa-tag"></i> OpenLDAP</a> <a href="/tags/LDAP/" rel="tag"><i class="fa fa-tag"></i> LDAP</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2020/09/17/consul-zhu-ce-zhong-xin-ce-shi/" rel="next" title="Consul 注册中心测试"><i class="fa fa-chevron-left"></i> Consul 注册中心测试</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2020/10/22/grafana-ji-cheng-openldap-tong-yi-zhang-hu-ren-zheng/" rel="prev" title="Grafana 集成 OpenLDAP统一账户认证">Grafana 集成 OpenLDAP统一账户认证 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"><div class="jiathis_style"><span class="jiathis_txt">分享到：</span> <a class="jiathis_button_fav">收藏夹</a> <a class="jiathis_button_copy">复制网址</a> <a class="jiathis_button_email">邮件</a> <a class="jiathis_button_weixin">微信</a> <a class="jiathis_button_qzone">QQ空间</a> <a class="jiathis_button_tqq">腾讯微博</a> <a class="jiathis_button_douban">豆瓣</a> <a class="jiathis_button_share">一键分享</a> <a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a> <a class="jiathis_counter_style"></a></div><script type="text/javascript">var jiathis_config={data_track_clickback:!0,summary:"",shortUrl:!1,hideMore:!1}</script><script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/chen.png" alt="Zhongzhou Chen"><p class="site-author-name" itemprop="name">Zhongzhou Chen</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/%7C%7C%20archive"><span class="site-state-item-count">371</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">89</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">188</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一．环境"><span class="nav-text">一．环境</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二．软件获取"><span class="nav-text">二．软件获取</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#OpenLDAP"><span class="nav-text">OpenLDAP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BDB"><span class="nav-text">BDB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LDAP-Administrtor"><span class="nav-text">LDAP Administrtor</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三．准备"><span class="nav-text">三．准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四．安装OpenLDAP"><span class="nav-text">四．安装OpenLDAP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-依赖包"><span class="nav-text">4.1 依赖包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-安装BDB"><span class="nav-text">4.2 安装BDB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-更新lib库"><span class="nav-text">4.3 更新lib库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-安装OpenLDAP"><span class="nav-text">4.4 安装OpenLDAP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-设置可执行命令"><span class="nav-text">4.5 设置可执行命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五．简单配置"><span class="nav-text">五．简单配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-安装完成的openldap-2-4-44目录结构"><span class="nav-text">5.1 安装完成的openldap-2.4.44目录结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-配置rootdn密码-optional"><span class="nav-text">5.2 配置rootdn密码(optional)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-主配置文件slapd-conf"><span class="nav-text">5.3 主配置文件slapd.conf</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-初始化OpenLADP-optional"><span class="nav-text">5.4 初始化OpenLADP(optional)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5-启动OpenLADP"><span class="nav-text">5.5 启动OpenLADP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6-验证"><span class="nav-text">5.6 验证</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六．简单使用-示例"><span class="nav-text">六．简单使用(示例)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#61-创建1个管理员账号"><span class="nav-text">61 创建1个管理员账号</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#编辑ldif文件"><span class="nav-text">编辑ldif文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插入数据库"><span class="nav-text">插入数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#验证"><span class="nav-text">验证</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-创建1个具有部门属性的员工"><span class="nav-text">6.2 创建1个具有部门属性的员工</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#编辑ldif文件-1"><span class="nav-text">编辑ldif文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插入数据库-1"><span class="nav-text">插入数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#验证-1"><span class="nav-text">验证</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-ldapadmin"><span class="nav-text">6.3 ldapadmin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#运行ldapadmin"><span class="nav-text">运行ldapadmin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建数据库文件"><span class="nav-text">创建数据库文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#验证-2"><span class="nav-text">验证</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七．附录"><span class="nav-text">七．附录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-常见对象属性"><span class="nav-text">7.1 常见对象属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-ldif文件示例"><span class="nav-text">7.2 ldif文件示例</span></a></li></ol></li></ol></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Zhongzhou Chen</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">Site words total count&#58;</span> <span title="Site words total count">863.9k</span></div><span class="post-meta-divider"></span></div></footer></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script type="text/javascript" src="/js/src/love.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,log:!1,model:{jsonPath:"/live2dw/assets/shizuku.model.json"},display:{position:"right"},mobile:{show:!0,scale:.2},react:{opacityDefault:.7,opacityOnHover:.2,opacity:.4}})</script></body></html><!-- rebuild by neat -->